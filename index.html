<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Smoking Shop</title>
  <meta name="description" content="Smoking Shop">
  <meta name="keywords" content="Smoking Shop">
  <link rel="shortcut icon" type="image/x-icon" href="*.ico">
  <link rel="shortcut icon" type="image/png" href="*.png">
  <link rel="apple-touch-icon" href="favicon.png">
  <link rel="stylesheet" href="css/style.min.css">
  <link rel="canonical" href="https://***.ru/">
  <script>document.createElement("picture");</script>
  <!-- <script src="picturefill.js" async></script> -->
</head>

<body>

  <div style="display: none">
    <include src="build/img/sprite.svg"></include>
  </div>

  <!----------header-->
  <header class="header js-header">
      <div class="header__container">

          <include src="html-modules/header/header.html"></include>

      </div>
  </header>

  <!----------main-->
  <main class="main main--no-padding">
      <div class="main__container container-fluid">
          <div class="row">

              <include src="html-modules/__index-page/catalog.html"></include>
              <include src="html-modules/__index-page/top-slider.html"></include>
              <include src="html-modules/__index-page/advantages.html"></include>
              <include src="html-modules/__index-page/main-catalog.html"></include>
              <include src="html-modules/__index-page/goods-sliders.html"></include>

          </div>
      </div>
      <div class="main__container container-fluid">
          <div class="row">

              <include src="html-modules/__index-page/vk-comments.html"></include>

          </div>
      </div>

      <div class="main__container container-fluid">
          <div class="row">

              <include src="html-modules/__index-page/news.html"></include>
              <include src="html-modules/__index-page/articles.html"></include>
              <include src="html-modules/__index-page/brands.html"></include>

          </div>
      </div>

      <div class="main__container container-fluid">
          <div class="row">

              <!----------overlays for all pages-->
              <include src="html-modules/overlays/overlays.html"></include>

          </div>
      </div>

  </main>

  <!----------footer-->
  <footer class="footer">
      <div class="footer__container container-fluid">

          <include src="html-modules/footer/top-footer.html"></include>
          <include src="html-modules/footer/bottom-footer.html"></include>

      </div>
  </footer>

  <!----------library concat-->
  <script src="js/script.js"></script>

  <!----------actions for all pages-->
  <include src="js-modules/__all-pages/__modals.html"></include>
  <include src="js-modules/__all-pages/__open-collapsed-elemets-toggle-style.html"></include>
  <include src="js-modules/__all-pages/__switch.html"></include>
  <include src="js-modules/__all-pages/__scroll-top.html"></include>

  <!----------open collapsed elements-->
  <include src="js-modules/__open-collapsed-elemets/script.html"></include>
  <!----------only page scripts-->
  <include src="js-modules/__index-page/script.html"></include>



  <script>
      //описываем новый объект
      function CustomValidation() {}
      CustomValidation.prototype = {
        // Установим пустой массив сообщений об ошибках
        invalidities: [],

        // Метод, проверяющий валидность (в качестве аргумента выбранный input)
        _validityChecker: function(input) {

            //у каждого input есть свойство в котором хранится булевое значение на определенные ошибки
          var validity = input.validity;

          if (validity.tooLong) {
            var maxlength = input.getAttributeValue("maxlength");
            this._addInvalidity("Максимальное количество символов " + maxlength);
          }

          if (validity.tooShort) {
            var minlength = input.getAttribute("minlength");
            this._addInvalidity("Минимальное количество символов " + minlength);
          }

          // И остальные проверки валидности...
        },

        // Добавляем сообщение об ошибке в массив ошибок
        _addInvalidity: function(message) {
          this.invalidities.push(message);
        },

        // Убираем все сообщения об ошибке из массива ошибок
        _removeInvalidity: function() {
          this.invalidities.splice(0);
        },

        // Получаем общий текст сообщений об ошибках
        _getInvalidities: function() {
          return this.invalidities.join('. \n');
        },

        //Вставляем текст сообщения об ошибке
        _getSiblingElementOfInput: (input, message) => {
            var inputSibling = input.nextElementSibling;
            inputSibling.innerText = message;
        },

        //Вставляем текст сообщения об ошибке
        _addInvalidClassForInput: (input) => {
            input.classList.add("invalid");
        },

        _removeInvalidClassForInput: (input) => {
            if (input.classList.contains("invalid")) {
                input.classList.remove("invalid");
            }
        },

        _addValidClassForInput: (input) => {
            if (input.classList.contains("invalid")) {
                return false;
            }
            input.classList.add("valid");
        },

        _removeValidClassForInput: (input) => {
            if (input.classList.contains("valid")) {
                input.classList.remove("valid");
            }
        },
      };


      // Добавляем обработчик клика на кнопку отправки формы
      //нажимаем на кнопку отправки формы
      var submit = document.querySelector(".js-profile-reg");

      submit.addEventListener("mousedown", function(event) {
          var inputs = document.querySelectorAll(".js-profile-reg-input");
          for (var i = 0; i < inputs.length; i++) {
              var currentInput = inputs[i];
              var inputCustomValidation = new CustomValidation(); // Создадим объект CustomValidation
              inputCustomValidation._removeValidClassForInput(currentInput);
              inputCustomValidation._removeInvalidClassForInput(currentInput);
              if (currentInput.checkValidity() == false) {
                  inputCustomValidation._validityChecker(currentInput); // Выявим ошибки
                var customValidityMessage = inputCustomValidation._getInvalidities(); // Получим все сообщения об ошибках
                currentInput.setCustomValidity(customValidityMessage); // Установим специальное сообщение об ошибке
                var errorsField = inputCustomValidation._getSiblingElementOfInput(currentInput, customValidityMessage);
                inputCustomValidation._removeInvalidity();
                inputCustomValidation._addInvalidClassForInput(currentInput);
                var stopSubmit = true;
              } // закончился if
              inputCustomValidation._addValidClassForInput(currentInput);
          } // закончился цикл
          if (stopSubmit) {
            event.preventDefault();
          }
      });

      submit.addEventListener("click", function(event) {
          var inputs = document.querySelectorAll(".js-profile-reg-input");
          for (var i = 0; i < inputs.length; i++) {
              var currentInput = inputs[i];
              var inputCustomValidation = new CustomValidation(); // Создадим объект CustomValidation
              inputCustomValidation._removeValidClassForInput(currentInput);
              inputCustomValidation._removeInvalidClassForInput(currentInput);
              if (currentInput.checkValidity() == false) {
                  inputCustomValidation._validityChecker(currentInput); // Выявим ошибки
                var customValidityMessage = inputCustomValidation._getInvalidities(); // Получим все сообщения об ошибках
                currentInput.setCustomValidity(customValidityMessage); // Установим специальное сообщение об ошибке
                var errorsField = inputCustomValidation._getSiblingElementOfInput(currentInput, customValidityMessage);
                inputCustomValidation._removeInvalidity();
                inputCustomValidation._addInvalidClassForInput(currentInput);
                var stopSubmit = true;
              } // закончился if
              inputCustomValidation._addValidClassForInput(currentInput);
          } // закончился цикл

          if (stopSubmit) {
            event.preventDefault();
          }
      });
  </script>




















</body>

</html>