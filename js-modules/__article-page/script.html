<script>
//СЛАЙДЕР ПОСЛЕДНИХ ПРОСМОТРЕННЫХ ТОВАРОВ
var watchedProducts = new Glide('.js-catalog-slider__container', {
    gap: -1,
    bound: true,
    rewind: false,
    perView: 4,
    peek: {
        before: 0,
        after: 0,
    },
    breakpoints: {
        1023: {
            peek: {
                before: 0,
                after: 50,
            },
            perView: 3,
        },
        767: {
            peek: {
                before: 0,
                after: 50,
            },
            perView: 2,
        },
        575: {
            peek: {
                before: 0,
                after: 100,
            },
            perView: 1,
        },
        480: {
            peek: {
                before: 0,
                after: 30,
            },
            perView: 1,
        },
    }
});
watchedProducts.mount();
</script>

  <script>
// ----------------------------------------ФИЛЬТРЫ
      var catalogSection = {

          catalogButtons: [
          ".js-filters__title",
          ".js-sort__title",
          ".js-catalog-section__text-tog",
          ],

          TRANSITION_TIME: "300",

// ОБРАБОТЧИК ФИЛЬТРА
          filterShowContent: () => {
              catalogSection.catalogButtons.forEach(function(item) {
                  document.querySelectorAll(item).forEach((item) => {
                      item.addEventListener("click", (event) => {
                          item.classList.toggle("active-btn");
                          if (item.classList.contains("js-filters__title")) {
                              catalogSection.findFilterContentId(item);
                              return false;
                          }
                          catalogSection.findOtherContentId(item);
                      });
                  });
              });
          },

// Высота элемента без учета схлопывания
          elementHeightBeforeCollapse: (item) => {
              item.style.maxHeight = item.scrollHeight + "px";
              item.style.maxHeight = "0px";
          },

// Убираем ограничитель высоты
          deleteItemMaxHeight: (item) => {
              setTimeout(function() {
                  item.style.maxHeight = "none";
              }, catalogSection.TRANSITION_TIME);
          },

// Находим элемент через id с помощью data-атрибута (без заданной высоты)
          findFilterContentId: (item) => {
              var findContentElementByID = document.getElementById(item.dataset.findId);
              findContentElementByID.style.maxHeight = findContentElementByID.scrollHeight + "px";
              if (!item.classList.contains("active-btn")) {
                  catalogSection.elementHeightBeforeCollapse(findContentElementByID);
                  return false;
              }
              catalogSection.deleteItemMaxHeight(findContentElementByID);
          },

// ДЛЯ ЭЛЕМЕНТОВ С ФИКСИРОВАННОЙ ВЫСОТОЙ
          findOtherContentId: (item) => {
              var findContentElementByID = document.getElementById(item.dataset.findId);
              if (item.classList.contains("active-btn")) {
                  findContentElementByID.style.maxHeight = findContentElementByID.scrollHeight + "px";
                  return false;
              }
              findContentElementByID.style.removeProperty("max-height");
          },
      };
      catalogSection.filterShowContent();
  </script>