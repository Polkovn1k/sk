<script>
//СЛАЙДЕР ПОСЛЕДНИХ ПРОСМОТРЕННЫХ ТОВАРОВ
var watchedProducts = new Glide('.js-catalog-slider__container', {
    gap: -1,
    bound: true,
    rewind: false,
    perView: 4,
    peek: {
        before: 0,
        after: 0,
    },
    breakpoints: {
        1023: {
            peek: {
                before: 0,
                after: 50,
            },
            perView: 3,
        },
        767: {
            peek: {
                before: 0,
                after: 50,
            },
            perView: 2,
        },
        575: {
            peek: {
                before: 0,
                after: 100,
            },
            perView: 1,
        },
        480: {
            peek: {
                before: 0,
                after: 30,
            },
            perView: 1,
        },
    }
});
watchedProducts.mount();
//Комментарии к ответам
var articlePage = {
    listenBtnCallingReplyForm: () => {
        document.querySelectorAll(".js-reply-btn").forEach(function(item) {
            item.addEventListener("click", (event) => {
                event.preventDefault();
                articlePage._removeAllFormActive();
                articlePage._removeAllBtnsHidden();
                articlePage._addHiddenToClickedBtns(item);
                var clickedBtnParent = articlePage._findClickedBtnsParent(item);
                var findRequiredElement = articlePage._findSiblingAndMakeActive(clickedBtnParent);
                articlePage._doFormActive(findRequiredElement);
            });
        });
    },

    listenBtnClosingReplyForm: () => {
        document.querySelectorAll(".js-btn-cancel").forEach(function(item) {
            item.addEventListener("click", (event) => {
                event.preventDefault();
                articlePage._removeAllFormActive();
                articlePage._removeAllBtnsHidden();
            });
        });
    },

    _addHiddenToClickedBtns: (clickedBtn) => {
        clickedBtn.classList.add("hidden");
    },

    _doFormActive: (element) => {
        element.classList.add("active");
    },

    _findClickedBtnsParent: (clickedBtn) => {
        return clickedBtn.parentElement;
    },

    _findSiblingAndMakeActive: (element) => {
        return element.nextElementSibling;
    },

    _removeAllFormActive: () => {
        document.querySelectorAll(".js-discussion-form").forEach((item) => {
            item.classList.remove("active");
        });
    },

    _removeAllBtnsHidden: () => {
        document.querySelectorAll(".js-reply-btn").forEach((item) => {
            item.classList.remove("hidden");
        });
    },
};
articlePage.listenBtnCallingReplyForm();
articlePage.listenBtnClosingReplyForm();
</script>