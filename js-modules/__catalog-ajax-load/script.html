<script>
//Подрузка товаров ajax'ом
var loadAjaxContent = {

    xhr: new XMLHttpRequest(),

    ITEMS_PER_CLICK: 6,

    fragmentsContainer: document.createDocumentFragment(),

    ajaxObject: null,

    listenClick: (ajaxCallBtn, container, jsonFrom) => {
        if (document.querySelector(ajaxCallBtn) == null) {
            return false;
        }
        document.querySelector(ajaxCallBtn).addEventListener("click", function (event) {
            if (loadAjaxContent.xhr.status === 200) {
                loadAjaxContent._addContentAfterClick(ajaxCallBtn, container);
                return false;
            }
            loadAjaxContent.xhr.addEventListener('load', function () {
                loadAjaxContent.ajaxObject = JSON.parse(loadAjaxContent.xhr.responseText);
                event.preventDefault();
                loadAjaxContent._addContentAfterClick(ajaxCallBtn, container);
              });
            loadAjaxContent.xhr.open("GET", jsonFrom);
            loadAjaxContent.xhr.send();
        });
    },

    _addContentAfterClick: (clickedBtn, containerToInsert) => {
        for (var i = 0; i < loadAjaxContent.ITEMS_PER_CLICK; i++) {
            if (loadAjaxContent.ajaxObject.length <= 0) {
                document.querySelector(clickedBtn).classList.add("visually-hidden");
                continue;
            }
            var fragItem = document.createRange().createContextualFragment(loadAjaxContent.ajaxObject[0]);
            loadAjaxContent.fragmentsContainer.appendChild(fragItem);
            loadAjaxContent.ajaxObject.shift();
        };
        document.getElementById(containerToInsert).appendChild(loadAjaxContent.fragmentsContainer);
        if (loadAjaxContent.ajaxObject.length <= 0) {
            document.querySelector(clickedBtn).classList.add("visually-hidden");
        }
    },

    init: () => {
        loadAjaxContent.listenClick(".js-ajax-btn-product", "products-list-container", "json/ajax-catalog.json");
        loadAjaxContent.listenClick(".js-ajax-btn-brands", "brands-list-container", "json/ajax-brands.json");
    },
};
loadAjaxContent.init();
</script>